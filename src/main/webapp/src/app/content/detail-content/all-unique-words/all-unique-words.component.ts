import { Component, OnInit, OnDestroy } from '@angular/core';
import * as lodash from 'lodash';
import { Book, ContentUnit, WordStatus } from 'app/content/content.interface';
import { ContentService } from 'app/content/content.service';
import { ActivatedRoute } from '@angular/router';

@Component({
  selector: 'app-all-unique-words',
  templateUrl: './all-unique-words.component.html',
  styleUrls: ['./all-unique-words.component.scss']
})
export class AllUniqueWordsComponent implements OnInit, OnDestroy {

  dataLoaded: boolean = false;
  book: Book;
  wordFrequency: Array<ContentUnit>;

  constructor(private route: ActivatedRoute, 
    private contentService: ContentService) { }

  ngOnInit() {
    const id = +this.route.parent.snapshot.paramMap.get('id');

    this.contentService.getContent(id).subscribe(book => {
      this.book = book;
      this.wordFrequency = lodash.sortBy(book.wordFrequency, (o) => -o.frequency);
      this.dataLoaded = true;
    });
  }

  ngOnDestroy() {
    
  }
}
