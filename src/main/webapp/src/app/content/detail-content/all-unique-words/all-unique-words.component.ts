import { Component, OnInit, Input } from '@angular/core';
import * as lodash from 'lodash';
import { KnownWordsService } from 'app/content/known-words.service';
import { KnownWord } from 'app/content/content.interface';

@Component({
  selector: 'app-all-unique-words',
  templateUrl: './all-unique-words.component.html',
  styleUrls: ['./all-unique-words.component.scss']
})
export class AllUniqueWordsComponent implements OnInit {

  @Input() wordFrequency;
  @Input() knownWords: Array<KnownWord>;

  constructor(private knownWordsService: KnownWordsService) { }

  ngOnInit() {
    this.wordFrequency = lodash.sortBy(this.wordFrequency, (o) => -o.frequency);
    //this.knownWordsService.getAll().subscribe(kw => this.knownWords = kw);
  }

  updateWordStatus(word: String, status = false) {
    this.knownWordsService.add({ word: word, almost: status });
  }

  isUnknown(word: String) {
    return !!this.knownWords.find(kw => kw.word === word);
  }

  isKnown(word: String, almost: boolean) {
    if (almost) {
      return !this.knownWords.find(kw => kw.word === word && kw.almost === almost);
    }
    return !this.knownWords.find(kw => kw.word === word && !kw.almost);
  }
}
