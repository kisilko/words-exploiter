import { Injectable } from "@angular/core";
import { Headers, RequestOptions, Http } from "@angular/http";

import { Observable } from "rxjs/Observable";
import 'rxjs/Rx';

@Injectable()
export class NewContentService {

  constructor(private http: Http) {}

  storeFile(file: File) {
    const formData: FormData = new FormData();
    formData.append('file', file, file.name);

    const headers: Headers = new Headers();
    headers.append('Accept', 'application/json');

    const options = new RequestOptions({ headers: headers });
    this.http.post('/api/new-content', formData, options)
      .map(res => res.json())
      .catch(error => Observable.throw(error))
      .subscribe(
        data => console.log('success'),
        error => console.log(error)
      );
  }
}
